"use strict";const input=document.querySelector(".js-input"),button=document.querySelector(".js-button"),resultsList=document.querySelector(".js-results"),favouritesList=document.querySelector(".js-favourites");let series=[],favourites=[];function getResults(){let t=input.value;fetch("//api.tvmaze.com/search/shows?q="+t).then(t=>t.json()).then(t=>{series=t,paintResults(),listenAddItems(),paintFavourites()})}function paintResults(){let t="";for(let e=0;e<series.length;e++){const s=series[e],i=s.show.image?""+s.show.image.medium:"https://via.placeholder.com/210x295/ffffff/666666/?text=TV";t+=`<li class="list__results-item" id="${s.show.id}">`,t+='<div class="list__results-container">',t+=`<img class="list__results-img" src="${i}" alt="${s.show.name}">`,t+=`<h2 class="list__results-title">${s.show.name}</h2>`,t+="</div>",t+="</li>"}resultsList.innerHTML=t}const listenAddItems=()=>{const t=document.querySelectorAll(".list__results-item");for(const e of t)e.addEventListener("click",addFavoriteItem)};function addFavoriteItem(t){t.currentTarget;const e=t.currentTarget.id,s=series.find(t=>t.show.id===parseInt(e)),i=favourites.findIndex(t=>t.show.id===parseInt(e));-1===i?(favourites.push(s),paintFavourites(),setInLocalStorage()):(favourites.splice(i,1),paintFavourites(),setInLocalStorage())}function paintFavourites(){let t="";const e=document.querySelector(".js-reset-btn");for(let e=0;e<favourites.length;e++){const s=favourites[e],i=s.show.image?""+s.show.image.medium:"https://via.placeholder.com/210x295/ffffff/666666/?text=TV";t+=`<li class="favourites__list-item" id="${s.show.id}">`,t+='<div class="favourites__list-container">',t+=`<img class="favourites__list-img" src="${i}" alt="${s.show.name}">`,t+=`<h2 class="favourites__list-title">${s.show.name}</h2>`,t+="</div>",t+="</li>"}favouritesList.innerHTML=t,0===favourites.length?e.classList.add("reset-button-hidden"):e.classList.remove("reset-button-hidden"),listenFavouriteItems()}const listenFavouriteItems=()=>{const t=document.querySelectorAll(".favourites__list-item"),e=document.querySelector(".js-reset-btn");for(const e of t)e.addEventListener("click",removeFavouriteItem);e.addEventListener("click",removeAllFavorites)};function removeAllFavorites(){favourites=[],localStorage.removeItem("favourites"),favouritesList.innerHTML="",paintFavourites()}function removeFavouriteItem(t){const e=t.currentTarget.id,s=favourites.findIndex(t=>t.show.id===parseInt(e));favourites.splice(s,1),paintFavourites(),setInLocalStorage()}const getFromLocalStorage=()=>{const t=localStorage.getItem("favourites");null!==t&&(favourites=JSON.parse(t))},setInLocalStorage=()=>{const t=JSON.stringify(favourites);localStorage.setItem("favourites",t)};button.addEventListener("click",getResults),getFromLocalStorage(),paintFavourites();